if [ "$interface" == "eth1" ] || [ "$interface" == "br0" ]; then

	echo "Enter Fallback ($reason)";
	FALLBACK_IP="192.168.10.1";
	if [ $reason == "PREINIT" ]; then	
		if [ -f "/var/run/dnsmasq.pid" ]; then
	    echo "Shutting down dnsmasq"
	    /etc/init.d/dnsmasq stop
		fi
	fi
	
	if [ $reason == "TIMEOUT" ] && [ $new_ip_address == $FALLBACK_IP ]; then
		echo "DHCP timeout detected. Using fallback ip ($FALLBACK_IP)";
		if [ -f "/var/run/dnsmasq.pid" ]; then
			echo "dnsmasq already running";
		else
			# dnsmasq not running, shall we start it?
			PROFILE=`grep "profile" /home/admin/.bubbacfg | cut -d= -f2`;
			if [ $PROFILE = "auto" ] || test -e /etc/rc2.d/S??dnsmasq; then
			  echo "Starting dnsmasq.";
			  /etc/init.d/dnsmasq start;
			fi
		fi
	 	# remove defaule route on internal net to have default gw on eth0
		echo "Removing default route.";
		route del default gw 192.168.10.1;
	fi
	echo "Exit Fallback ($reason)";
fi
